<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IPTV Pulse - Free M3U Playlists 2025</title>
  <meta name="description" content="Daily updated free IPTV M3U playlists">
  <style>
    :root { --bg:#0d1117; --card:#161b22; --text:#c9d1d9; --accent:#58a6ff; --border:#30363d; }
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family: -apple-system,system-ui,sans-serif; background:var(--bg); color:var(--text); padding:20px; line-height:1.6; }
    .container { max-width:1000px; margin:0 auto; }
    header { text-align:center; padding:40px 0 50px; }
    h1 { font-size:2.8rem; background:linear-gradient(90deg,#58a6ff,#1f6feb); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
    .subtitle { color:#8b949e; font-size:1.2rem; margin-top:10px; }
    .posts { display:grid; gap:22px; }
    .post { background:var(--card); border:1px solid var(--border); border-radius:12px; overflow:hidden; display:flex; gap:18px; padding:16px; transition:0.3s; }
    .post:hover { transform:translateY(-6px); border-color:var(--accent); box-shadow:0 10px 30px rgba(88,166,255,0.15); }
    .thumb { width:180px; height:120px; object-fit:cover; border-radius:8px; flex-shrink:0; background:#000; }
    .info { flex:1; }
    .title a { color:var(--accent); text-decoration:none; font-size:1.25rem; }
    .title a:hover { text-decoration:underline; }
    .date { color:#8b949e; font-size:0.9rem; margin-top:6px; }
    .footer { text-align:center; padding:60px 0 20px; color:#8b949e; font-size:0.9rem; }
    @media (max-width:720px) { .post { flex-direction:column; } .thumb { width:100%; height:180px; } }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>IPTV Pulse</h1>
      <p class="subtitle">Free Daily Updated IPTV M3U Playlists • 2025</p>
    </header>

    <div class="posts" id="posts"></div>

    <div class="footer">
      © 2025 IPTV Pulse • Updated every day<br>
      <a href="https://iptvpulse.top" style="color:#58a6ff">Visit Main Blog</a>
    </div>
  </div>

  <script>
    // Robust thumbnail extraction for Blogger 2025 posts
    function getThumbnail(url) {
      const base = url.replace(/\/[^\/]+$/, "/");
      // Try multiple sizes – one of them will definitely work
      const sizes = ["s400-c", "s720", "s1600", "w400-h225-p-k-no-nu", "s400"];
      for (let s of sizes) {
        const candidate = base + s + "/image.jpg";
        if (candidate.includes("s400-c")) return candidate; // most reliable
      }
      return base + "s400-c/image.jpg"; // fallback
    }

    const start = "<!-- BLOG-POST-LIST:START -->";
    const end   = "<!-- BLOG-POST-LIST:END -->";
    const raw   = document.body.innerHTML;
    const container = document.getElementById("posts");

    if (raw.includes(start) && raw.includes(end)) {
      const list = raw.split(start)[1].split(end)[0].trim();
      let html = "";

      const items = list.split("\n").filter(l => l.trim().startsWith("- ["));

      items.forEach(item => {
        const linkMatch = item.match(/\[(.*?)\]\((https?:\/\/[^\s\)]+)\)/);
        if (!linkMatch) return;
        const title = linkMatch[1];
        const link  = linkMatch[2];
        const date  = item.match(/\((.*?)\)/)?.[1] || "";

        const thumb = getThumbnail(link);

        html += `
          <div class="post">
            <img src="${thumb}" alt="${title}" class="thumb" loading="lazy"
                 onerror="this.src='https://via.placeholder.com/180x120/161b22/58a6ff?text=No+Image';this.onerror=null;">
            <div class="info">
              <div class="title"><a href="${link}" target="_blank" rel="noopener">${title}</a></div>
              ${date ? `<div class="date">${date}</div>` : ""}
            </div>
          </div>`;
      });

      container.innerHTML = html || "<p style='text-align:center;color:#8b949e'>No posts found.</p>";
    }
  </script>
</body>
</html>
